<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>TK Phones — Admin</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="styles.css">
  <style>body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}</style>
</head>
<body class="bg-gray-50 text-gray-900">
  <main class="max-w-5xl mx-auto px-4 py-10">
    <h1 class="text-3xl font-bold mb-6">Admin Dashboard</h1>

    <section id="authSection" class="card mb-6">
      <h2 class="font-semibold mb-2">Sign In</h2>
      <div class="grid md:grid-cols-2 gap-4">
        <input id="email" type="email" class="input" placeholder="Email">
        <input id="password" type="password" class="input" placeholder="Password">
      </div>
      <div class="mt-4 flex gap-2">
        <button id="signin" class="btn btn-primary">Sign in</button>
        <button id="signup" class="btn btn-ghost">Create account</button>
        <button id="signout" class="btn btn-ghost hidden">Sign out</button>
      </div>
      <p class="text-sm text-gray-600 mt-2">Accounts must be added to <code>admin_emails</code> to gain write access.</p>
      <div id="authStatus" class="text-sm text-gray-700 mt-2"></div>
    </section>

    <section id="pricesSection" class="card">
      <div class="flex items-center justify-between mb-4">
        <h2 class="font-semibold">Buyback Prices (Q1–Q4)</h2>
        <button id="addModelBtn" class="btn btn-primary">Add Model</button>
      </div>
      <div class="overflow-auto">
        <table class="min-w-full text-sm" id="pricesTable">
          <thead>
            <tr class="text-left border-b">
              <th class="py-2 pr-4">Model ID</th>
              <th class="py-2 pr-4">Brand</th>
              <th class="py-2 pr-4">Model</th>
              <th class="py-2 pr-4">Storage</th>
              <th class="py-2 pr-4">Carrier</th>
              <th class="py-2 pr-4">Q1</th>
              <th class="py-2 pr-4">Q2</th>
              <th class="py-2 pr-4">Q3</th>
              <th class="py-2 pr-4">Q4</th>
              <th class="py-2 pr-4">Save</th>
            </tr>
          </thead>
          <tbody id="pricesBody"></tbody>
        </table>
      </div>
    </section>
  </main>

  <!-- Add/Edit Modal -->
  <div id="modal" class="modal">
    <div class="bg-white rounded-2xl shadow p-6 max-w-lg w-full">
      <h3 class="text-xl font-bold mb-2" id="modalTitle">Add Model</h3>
      <div class="grid md:grid-cols-2 gap-3">
        <input id="m_model_id" class="input" placeholder="model_id (unique)">
        <input id="m_brand" class="input" placeholder="Brand">
        <input id="m_model_name" class="input" placeholder="Model name">
        <input id="m_storage" class="input" type="number" placeholder="Storage (GB)">
        <input id="m_carrier" class="input" placeholder="Carrier">
        <input id="m_q1" class="input" type="number" placeholder="Q1 price">
        <input id="m_q2" class="input" type="number" placeholder="Q2 price">
        <input id="m_q3" class="input" type="number" placeholder="Q3 price">
        <input id="m_q4" class="input" type="number" placeholder="Q4 price">
      </div>
      <div class="mt-4 flex justify-end gap-2">
        <button id="modalCancel" class="btn btn-ghost">Cancel</button>
        <button id="modalSave" class="btn btn-primary">Save</button>
      </div>
    </div>
  </div>

  <script src="web/config.js"></script>
  <script src="https://esm.sh/@supabase/supabase-js@2"></script>
  <script src="web/supabaseClient.js"></script>
  <script src="web/admin.js"></script>
</body>
</html>
